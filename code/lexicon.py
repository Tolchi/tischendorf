
Tischendorf_lexicon = { "PROS" : ("4314", "PREP"),
                        "EN" : ("1520/1520/1722/1722", "A-NSN/A-ASN/PREP/A-NSN"),
                        "DIA" : ('1223/2203', 'PREP/N-ASM'),
                        "DIAPANTOS" : ("1275", "ADV"),
                        "ARA" : ("686/687", "PRT/PRT-I"),
                        "AXELDAMAX" : ("184", "N-PRI"),
                        "SKOTEI" : ("4655", "N-DSN"),
                        "PRAEIS" : ("4239", "A-NPM"),
                        "ARAGE" : ("686", "PRT"),
                        "MHGE" : ("3361", "PRT-N"),
                        "KATABANTI" : ("2597", "V-2AAP-DSM"),
                        "DIATI" : ("1302", "PRT-I"),
                        "DIAKRISIS" : ("1253", "N-NSF"),
                        "DIWKOMEN" : ("1377", "V-PAI-1P"),
                        "DIWKONTAI" : ("1377", "V-PPI-3P"),
                        "ANOICEI" : ("457", "N-DSF"),
                        "OUDE" : ("3761", "CONJ-N"),
                        "INATI" : ("2444", "ADV-I"),
                        "SADDOUKIAN" : ("4523", "N-GPM"),
                        "SUMFWNHSOUSIN" : ("4856", "V-FAI-3P"),
                        "EKTOS" : ("1622/1623", "ADV/A-NSM"),
                        "ADMEIN" : ("689", "N-PRI"),
                        "ANAPLHRWSETE" : ("378", "V-FAI-2P"),
                        "ANAQEMASIN" : ("331", "N-DPN"),
                        "PROENEGKAS" : ("4393", "V-AAP-NSM"),
                        "HNOIGMENWN" : ("455", "V-RPP-GPM"),
                        "UMIN" : ("5210", "P-2DP"),
                        "UMWN" : ("5210", "P-2GP"),
                        "UMAS" : ("5210", "P-2AP"),
                        "UMEIS" : ("5210", "P-2NP"),
                        "HMIN" : ("2248", "P-1DP"),
                        "HMAS" : ("2248", "P-1AP"),
                        "HMEIS" : ("2248", "P-1NP"),
                        "HMWN" : ("2248", "P-1GP"),
                        "EME" : ("1473", "P-1AS"),  # NOTE: This could also be 1691
                        "EMOI" : ("1473", "P-1DS"), # NOTE: This could also be 1698
                        "EMOU" : ("1473", "P-1GS"), # NOTE: This could also be 1700
                        "ME" : ("1473", "P-1AS"), # NOTE: This could also be 3165
                        "MOI" : ("1473", "P-1DS"), # NOTE: This could also be 3427
                        "MOU" : ("1473", "P-1GS"), # NOTE: This could also be 3450
                        "SOU" : ("4771", "P-2GS"),  # NOTE: This could also be 4675
                        "SOI" : ("4771/4674", "P-2DS/S-2NPM"),
                        "SE" : ("4771", "P-2AS"), # NOTE: This could also be 4571
                        "AUTH" : ("3778/846/846", "D-NSF/P-DSF/P-NSF"),
                        "AUTOU" : ("846/846/847/848", "P-GSM/P-GSN/ADV/P-GSM"),
                        "AUTWN" : ("846/846/846/848", "P-GPM/P-GPF/P-GPN/F-GPF"),
                        "PANTI" : ("3839/3956/3956", "A-DSM/A-DSN/A-DSM"),
                        "OU" : ("3739/3739/3756/3757/3757", "R-GSM/R-GSN/PRT-N/ADV/R-GSN"),
                        "OSOI" : ("3745", "K-NPM"),
                        "EC" : ("1537/1803", "PREP/A-NUI"),
                        "MHTIGE" : ("3386", "PRT-I"),
                        "AGAQON" : ("18", "A-NSN/A-ASM/A-ASN"),
                        "MEIZW" : ("3173", "A-APN-C/A-ASF-C"),
                        "EIPON" : ("3004", "V-2AAM-2S/V-2AAI-1S/V-2AAI-3P"),
                        "EIPE" : ('3004', 'V-2AAM-2S'),
                        "EIPEN" : ('3004', 'V-2AAI-3S'),
                        "IDWN" : ('3708', 'V-2AAP-NSM'),
                        "IDON" : ("3708", "V-2AAI-3P/V-2AAI-1S"),
                        "HKOLOUQHSEI" : ('190', 'V-AAI-3S'),
                        "ELQEN" : ("2064", "V-2AAM-2S"),
                        "EPNICAN" : ("4155", "V-AAI-3P"),
                        "PEZOI" : ("3979", "A-NPM"),
                        "POISAS" : ("4160", "V-AAP-NSM"),
                        "QALLASSHS" : ('2281', 'N-GSF'),
                        "UIE" : ("5207", "N-VSM"),
                        "EIS" : ("1519/1520", "PREP/A-NSM"),
                        "HN" : ('1510/3739', 'V-IAI-3S/R-ASF'),
                        "HS" : ("1510/1510/3739", "V-IAI-2S/V-PAS-2S/R-GSF"), # NOTE: 2229 is the imperfect active indicative!  See Robinson's parscode.txt.
                        "ESTAI" : ('1510', 'V-FDI-3S'), # NOTE: This does not have a seperate entry in Strong's, so 1510 is correct.
                        "WSIN" : ("1510/3775", "V-PAS-3P/N-DPN"),  # NOTE: This does not have a seperate entry in Strong's, so 1510 is correct.
                        "HSAN" : ("1510", "V-IAI-3P"),  # NOTE: This does not have a seperate entry in Strong's, so 1510 is correct.
                        "H" : ("3588/1510/2228/3739/3739", "T-NSF/V-PAS-3S/PRT/R-DSF/R-NSF"),
                        "O" : ('3588/3739/3739', "T-NSM/R-NSN/R-ASN"),
                        "AI" : ('3588/3739', 'T-NPF/R-NPF'),
                        "OI" : ("3588/3739", "T-NPM/R-NPM"),
                        "EUQUS" : ('2112', 'ADV'),
                        "ECEDUSANTES" : ("1562", "V-AAP-NPM"),
                        "BALONTES" : ("906", "V-2AAP-NPM"),
                        "TI" : ("2444/5100/5100/5101/5101", "ADV-I/X-ASN/X-NSN/I-ASN/I-NSN"),
                        "TIS" : ("5100/5100/5100/5101/5101", "X-NSM/X-NSF/I-NSF/I-NSM/I-NSF"),
                        "TINES" : ("5100/5100/5101", "X-NPM/X-NPF/I-NPM"),
                        "LEGIWNWN" : ("3003", "N-GPF"),
                        "EFHMISQH" : ("5346", "V-API-3S"),
                        "HSQIEN" : ("2068", "V-IAI-3S"),
                        "INA" : ("2443", "CONJ"),
                        "POU" : ("4225/4226", "PRT/PRT-I"),
                        "SITOS" : ("4621", "N-NSM"), # NOTE: Is this a textual error? SITON? Nope, it's correct. Mr 4:28, and your parsing is good.
                        "EIXAN" : ("2192", "V-AAI-3P"),
                        "HLEIAN" : ("2243", "N-ASM"),
                        "KALWS" : ("2573", "ADV"),
                        "RABBEI" : ("4461", "HEB"),
                        "PRWTON" : ("4412/4413/4413/4413", "ADV/A-NSN/A-ASN/A-ASM"),
                        "MAKRAN" : ("3112/3117", "ADV/A-ASF"),
                        "STADIA" : ("4712", "N-APN"),
                        "PUROS" : ("4442/4450", "N-GSN/A-NSM"),
                        "SWMASIN" : ("4983", "N-DPN"),
                        "TAUTA" : ("3778", "D-APN/D-NPN"),
                        "ANEKUYAS" : ("352", "V-AAP-NSM"),
                        "APEKRINETAI" : ("611", "V-PDI-3S/V-POI-3S"),
                        "KATHGOREIAN" : ("2724", "N-ASF"),
                        "BALLOUSA" : ("906", "V-PAP-NSF"),
                        "BIBLARIDON" : ("974", "N-ASN"),
                        "EKPEIRAZONTES" : ("1598", "V-PAP-NPM"),
                        "ECOUQENWQH" : ("1848", "V-PAS-3S"),
                        "EISIN" : ("1510", "V-PAI-3P"),
                        "TOUT" : ("3778", "D-NSN"),
                        "TOUTO" : ("3778/3778", "D-NSN/D-ASN"),
                        "TOUTOIS" : ("3778/3778", "D-DPN/D-DPM"),
                        "TOUTON" : ("3778", "D-ASM"),
                        "TOUTOU" : ("3778/3778", "D-GSM/D-GSN"),
                        "TOUTOUS" : ("3778", "D-APM"),
                        "TOUTW" : ("3778/3778", "D-DSM/D-DSN"),
                        "TOUTWN" : ("3778/3778/3778", "D-GPM/D-GPF/D-GPN"),
                        "KOMIOUMENOI" : ("2865", "V-FMP-NPM"),
                        "AIMATA" : ("129", "N-NPN/N-APN"),
                        "APAITOUSIN" : ("523", "V-PAI-3P"),
                        "ANAKLINAI" : ("347", "V-AAN"),
                        "ANAPAUSWNTAI" : ("373", "V-AMS-3P"),
                        "EPIPESWN" : ("1968", "V-2AAP-NSM"),
                        "ANESTREYEN" : ("396", "V-2AAI-3S"),
                        "ANAPTUCAS" : ("380", "V-AAP-NSM"),
                        "APARTI" : ("534", "ADV"),
                        "APARNHSWMAI" : ("533", "V-FAS-1S"),
                        "APELIPON" : ("620", "V-AAI-1S/V-AAI-3P"),
                        "APESTALMENA" : ("649", "V-RPP-NPN"),
                        "EPESTEILAMEN" : ("1989", "V-AAI-1P"),
                        "APODIDOUS" : ("591", "V-PAP-ASM"),
                        "ASEBEIN" : ("764", "V-PAN"),
                        "BOSOR" : ("1007", "N-PRI"),
                        "BOSKOMENWN" : ("1006", "V-PPP-GPM"),
                        "DAIMONIZOMENOS" : ("1139", "V-PNP-NSM"),
                        "DIALOGISMOU" : ("1261", "N-GSM"),
                        "PARAPOREUESQAI" : ("3899", "V-PDN"),
                        "DIARPASAI" : ("1283", "V-AAN"),
                        "ALLACEIS" : ("236", "V-FAI-2S"),
                        "ANEBHMEN" : ("305", "V-2AAI-1P"),
                        "ANEBOHSEN" : ("310", "V-AAI-3S"),
                        "ANEGNWRISQH" : ("319", "V-API-3S"),
                        "ANTILEGONTES" : ("483", "V-PAP-NPM"),
                        "APOLABH" : ("618", "V-2AAS-3S"),
                        "AQWON" : ("121", "A-ASN"),
                        "ARCAMENOI" : ("756", "V-AMP-NPM"),
                        "ASQENWN" : ("770/772", "V-PAP-NSM/A-GPM"),
                        "BAPTISWNTAI" : ("907", "V-AMS-3P"), 
#                        "FAINENTAI" : ("5316", "V-PPI-3P"),  # Was in Mk 14:64.  Tischendorf's text said FAINE-NETAI; Clint Yale had FAINENTAI. I fixed it to FAINETAI, since that's what the appartus says.  It must have been a typo.
                        "GEMWN" : ("1073", "V-PAP-NSM"),
                        "ECWSAI" : ("1856", "V-AAN"),
                        "EGKATALEIPW" : ("1459", "V-PAI-1S"),
                        "EGKATELIPON" : ("1459", "V-IAI-3P"),
                        "EKLIPONTOS" : ("1587", "V-AAP-GSM"),
                        "EIDA" : ("3708", "V-2AAI-3P"), # NOTE: This only occurs in Re 17:6. Perseus parses it as as a plural form of EIDOS, but I think it must be a spelling mistake, so I am parsing it as thought it were EIDAN.
                        "EIDH" : ("1492", "V-RAS-2P"),
                        "EIGE" : ("1489", "COND"),
                        "EIKOSITREIS" : ("1501", "A-NPF"),  #NOTE: This only occurs once, in 1Co 10:8, and there it is feminine, since it modifies XILIADES, which is feminine.  Otherwise, if it occurred more than once, we might have had to make it ambiguous
                        "EKDIWCOUSIN" : ("1559", "V-FAI-3P"),
                        "ARNEI" : ("2496", "N-PRI"), # NOTE: This does not exist as such in Strong's: Therefore, *)IWRA/M.
                        "BEBLHKEN" : ("906", "V-RAI-3S"),
                        "DEUTEROPRWTW" : ("1207", "A-DSN"),
                        "DIAKOSIAI" : ("1250", "A-NPF"),
                        "DIARPASH" : ("1283", "V-AAS-3S"),
                        "DWSH" : ("1325", "V-AAS-3S"),
                        "EDEETO" : ("1189", "V-INI-3S"),
                        "EDU" : ("5143", "V-AAI-3S"),
                        "EGERETAI" : ("1453", "V-PPI-3S"),
                        "EILHMMENHN" : ("2983", "V-PPP-ASF"),
                        "EIPWS" : ("1513", "COND"),
                        "EIXAMEN" : ("1502", "V-AAI-1P"),
                        "EKRAUGAZON" : ("2905", "V-IAI-3P"),
                        "EKWLUSAMEN" : ("2967", "V-AAI-3P"),
                        "ELAMEITAI" : ("1639", "N-NPM"),
                        "ELEGXETE" : ("1651", "V-PAM-2P"),
                        "ELLOGEITAI" : ("1677", "V-PPI-3S"),
                        "ENDEIKNUMENOI" : ("1731", "V-PMP-NPM"),
                        "ENETUXON" : ("1793", "V-AAI-3P"),
                        "ENISXUSEN" : ("1765", "V-AAI-3S"),
                        "ECELHLUQATE" : ("1831", "V-RAI-2P"),
                        "ECEPEIRASAN" : ("1598", "V-AAI-3P"),
                        "ECETE" : ("2192", "V-FAI-2P"),
                        "EPARKEISQW" : ("1884", "V-PPM-3S"),
                        "EPARXEIW" : ("1885", "N-DSF"), #NOTE: Perhaps this should be A-DSF, but it is used substantivally the only place it occurs; ac 25:1.
                        "EPAUTOFWRW" : ("1888", "ADV"),
                        "EPHRKEN" : ("1869", "V-RAI-3S"),
                        "EPIKOURIWN" : ("1946", "N-GPM"),
                        "EPISKIASH" : ("1982", "V-AAS-3S"),
                        "EPOIEITE" : ("4160", "V-IAI-2P"),
                        "ERMHNEUOMENON" : ("2059", "V-PPP-NSN"),
                        "ESTWSA" : ("2476", "V-RAP-NSF"),
                        "ETOIMASANTES" : ("2090", "V-AAP-NPM"),
                        "EURHKENAI" : ("2147", "V-RAN"),
                        "EUXESQE" : ("2172", "V-PNM-2P"), # NOTE: You really should distinguish between V-POM and V-PDM...
                        "EWRWN" : ("3708", "V-IAI-3P"),
                        "EZHTOUMEN" : ("2212", "V-IAI-1P"),
                        "FWTIEI" : ("5461", "V-FAI-3S"),
                        "GEGENNHMEQA" : ("1080", "V-RPI-1P"),
                        "GEMISAI" : ("1072", "V-AAN"),
                        "GERGESHNWN" : ("1086", "N-GPM"),
                        "GINONTAI" : ("1096", "V-PNI-3P"),  # NOTE: You really should distinguish between V-POI and V-PDI...
                        "GUNAIKEI" : ("1135", "N-DSF"),  #NOTE: This only occurs in the first instance of Joh 8:10, and there it is evidently N-DSF. This is NOT a textual error; I checked against the facsimile.
                        "HGAPHSAMEN" : ("25", "V-AAI-1P"),
                        "HGGEILAN" : ("32", "V-AAI-3P"), # NOTE: A)GGE/LLW does not occur in Strong's dictionary, so, like Robinson in WH Joh 20:18, I am using A)/GGELOS (32). This (EGGEILAN) only occurs in Joh 4:51.
                        "HKASIN" : ("2240", "V-RAI-3P"),
                        "HLEIA" : ("2243", "N-GSM/N-DSM"), # NOTE: Luke 1:17; it really is *(HLIAS
                        "PEMPOUSIN" : ("3992", "V-PAI-3P"),
                        "UPEREKPERISSOU" : ("4053", "ADV"), # NOTE: This parsing is taken from that suggested by Strong's dictionary entry for UPEREKPERISSOU
                        "IATROIS" : ("2395", "N-DPM"),
                        "ISRAHLEITHS" : ("2475", "N-NSM"),
                        "KAIGE" : ("2534", "ADV/CONJ"),
                        "MHPWS" : ("3381", "CONJ-N"),
                        "MHPOU" : ("4225", "CONJ-N"), # The CONJ interpretation is warranted by BDAG for POU/ section 2, where it says that MHPOU is a conjunction.
                        "KAINAIS" : ("2537", "A-DPF"),
                        "KAKEINH" : ("2548", "D-NSF-K"),
                        "UPERLIAN" : ("3029", "ADV"),
                        "XCS" : ("5516", "A-NUI-ABB"),
                        "MIKROIS" : ("3398", "A-DPM"),
                        "PARADIDOI" : ("3860", "V-PAS-3S"),
                        "QAUMASONTAI" : ("2296", "V-FMI-3P"),
                        "PERIRERAMMENON" : ("4472", "V-RPR-ASN"),
                        "PEPTWKES" : ("4098", "V-RAI-2S"), # NOTE: This is NOT a textual error; the facsimile edition says the same thing. See Blass-Debrunner-Rehkopf paragraph 83. section 2 footnote 2.  Thanks to dr.theol. Georg Adamsen for advice here.
                        "TREFOUSIN" : ("5142", "V-PAI-3S"),
                        "STAURWSOUSIN" : ("4717", "V-FAI-3P"),
                        "LEBBAIOS" : ("3002", "N-NSM"),
                        "KAQISESQE" : ("2523", "V-FMI-2P"),
                        "PAREPOREUONTO" : ("3899", "V-INI-3P"),
                        "PERISSEUOUSIN" : ("4052", "V-PAI-3P"),
                        "PERISSOU" : ("4053", "A-GSN"),
                        "EKPERISSWS" : ("4057", "ADV"),
                        "TRUPHMATOS" : ("5169", "N-GSN"),
                        "TOLMHROTERON" : ("5112", "ADV"), # NOTE: Strong's says it's an adverb, but Fribergs in addition parse it as A-ASN-C (comparative adjective). Only occurs Ro 15:15.
                        "KEDROU" : ("2748", "N-GSM"),
                        "KERMA" : ("2772", "N-ASN"),
                        "PONHRAN" : ("4190", "A-ASF"),
                        "KRINAI" : ("2919", "V-AAN"),
                        "LASAIA" : ("2996", "N-NSF"),
                        "MEGALOIS" : ("3173", "A-DPM"),
                        "MOGIS" : ("3425", "ADV"),
                        "MIGMA" : ("3395", "N-ASN"),
                        "OPOTE" : ("3698", "ADV"),
                        "NOUMHNIAS" : ("3561", "N-GSF"),
                        "SAPFEIRH" : ("4551", "N-DSF"),
                        "KAQHNTAI" : ("2521", "V-PNI-2S"),
                        "KATABIBASQHSH" : ("2601", "V-FPI-2S"),
                        "KATEILHFQH" : ("2638", "V-API-3S"),
                        "KATEQHKEN" : ("2698", "V-AAI-3S"),
                        "KATHLQAMEN" : ("2718", "V-AAI-1P"),
                        "KAUQHSOMAI" : ("2545", "V-FPI-1S"),
                        "KEIRANTOS" : ("2751", "V-AAP-GSM"),
                        "KHMWSEIS" : ("5392", "V-FAI-2S"), # NOTE: FIMO/W used at Thayer's recommendation because KHMO/W not present in Strong's
                        "KOMIEITAI" : ("2865", "V-FMI-3S"),
                        "KRAUGAZONTA" : ("2905", "V-PAP-NPN"),
                        "KTHSASQE" : ("2932", "V-ADM-2P"),
                        "LALHSANTOS" : ("2980", "V-AAP-GSM"),
                        "LIQOBOLEISQAI" : ("3036", "V-PPN"),
                        "MEQISTANAI" : ("3179", "V-PAN"),
                        "METABALLOMENOI" : ("3328", "V-PMP-NPM"),
                        "MNHMONEUOUSIN" : ("3421", "V-PAI-3P"),
                        "NIKOUNTI" : ("3528", "V-PAP-DSM"),
                        "PARAKOLOUQHSEI" : ("3877", "V-FAI-3S"),
                        "PAREIXAN" : ("3930", "V-IAI-3P"),
                        "PARELABOSAN" : ("3880", "V-AAI-3P"),
                        "PARENEGKAI" : ("3911", "V-AAN"),
                        "PARESTWTWN" : ("3936", "V-RAP-GPM"),
                        "PEPWKAN" : ("4095", "V-RAI-3P"), # Re 18:3.10: It is clearly PI/NW, not PI/PTW, so 4095, not 4098.
                        "PERIELQONTES" : ("4022", "V-AAP-NPM"),
                        "PESATE" : ("4098", "V-AAM-2P"),
                        "PISTEUSONTES" : ("4100", "V-FAP-NPM"),
                        "PORRWTERW" : ("4208", "ADV-C"),
                        "PRAGMATEUSASQE" : ("4231", "V-ADM-2P"),
                        "PRONOEITAI" : ("4306", "V-PMI-3S"),
                        "PROSANALWSASA" : ("4321", "V-AAP-NSF"),
                        "QEMELIWSEI" : ("2311", "V-FAI-3S"),
                        "SESWTAI" : ("4982", "V-RPI-3S"),
                        "SUNANAMIGNUSQE" : ("4874", "V-PNM-2P"),
                        "SUNEFAGES" : ("4906", "V-AAI-2S"),
                        "SUNETELESQH" : ("4931", "V-API-3S"),
                        "SUNISTANTES" : ("4921", "V-PAP-NPM"),
                        "SUNKAMYON" : ("4781", "V-AAM-2S"),
                        "SUNKLHRONOMOIS" : ("4789", "A-DPM"),
                        "TETAXENAI" : ("5021", "V-RAN"),
                        "UFAINEI" : ("5307", "V-AAI-3S"), # NOTE: This is U(FANTO/S instead of U(FAI/NW because U(FAI/NW does not exist in Strong's.
                        "UGIEIS" : ("5199", "A-APM"),
                        "UPAGH" : ("5217", "V-PAS-3S"),
                        "PEILATOS" : ("4091", "N-NSM"),
                        "UPOKRISEIS" : ("5272", "N-APF"),
                        "UPOSTREYAS" : ("5290", "V-AAP-NSM"),
                        "PARAGEINETAI" : ("3854", "V-PNI-3S"),
                        "LEGOMENWN" : ("3004", "V-PPP-GPM"),
                        "EIRGASASQE" : ("2038", "V-ADI-2P"),
                        "BARIHSOU" : ("919", "N-GSM"),
                        "SAMARIAS" : ("4540", "N-GSF"),
                        "ESTAQHN" : ("2476", "V-API-1S"),
                        "ALA" : ("217", "N-ASN/N-NSN"),
#                        "" : ("", ""),
#                        "" : ("", ""),
#                        "" : ("", ""),
                        }


def choose_first(t1, t2):
    if t1[0] < t2[0]:
        return -1
    elif t1[0] > t2[0]:
        return 1
    else:
        return 0


class Lexicon:
    def __init__(self):
        self.lexicon = {}

    def primeWithTischendorf(self):
        self.primeWithLexicon(Tischendorf_lexicon)

    def primeWithLexicon(self, lex):
        for surface in lex.keys():
            self.addDefinition(surface, lex[surface][0], lex[surface][1])

    def addDefinition(self, surface, strongs, parsing):
        try:
            self.lexicon[surface]
        except KeyError:
            self.lexicon[surface] = []
        if tuple((str(strongs),str(parsing))) in self.lexicon[surface]:
            pass
        else:
            self.lexicon[surface].append(tuple((str(strongs),str(parsing))))

    def getUniqueDefinition(self, surface):
        try:
            if len(self.lexicon[surface])==1:
                return self.lexicon[surface][0]
            else:
                return None
        except KeyError:
            return None

    def writeLexicon(self, fname, bOnlyUnique):
        f = open(fname, "w")
        keys = self.lexicon.keys()
        keys.sort()
        for surface in keys:
            if bOnlyUnique:
                if len(self.lexicon[surface]) == 1:
                    self.writeEntry(f, surface)
                else:
                    pass
            else:
                self.writeEntry(f, surface)
        f.close()

    def getStrongsTags(self, surface):
        entries = self.lexicon[surface]
        entries.sort(choose_first)
        mystrongs = []
        mytags = []
        myfirststrong = str(entries[0][0])
        bAllSameStrongs = 1
        for e in entries:
            thisstrong = str(e[0])
            if myfirststrong != thisstrong:
                bAllSameStrongs = 0
            mystrongs.append(thisstrong)
            mytags.append(str(e[1]))

        if bAllSameStrongs:
            mystrongstring = myfirststrong
        elif len(mystrongs) > 1:
            mystrongstring = "/".join(mystrongs)
        else:
            mystrongstring = mystrongs[0]
        if len(mytags) > 1:
            mytagstring = "/".join(mytags)
        else:
            mytagstring = mytags[0]
        return tuple((mystrongstring, mytagstring))
            

    def writeEntry(self, f, surface):
        (mystrongstring, mytagstring) = self.getStrongsTags(surface)
        print >>f, "\"%s\" : (\"%s\", \"%s\")," % (surface, mystrongstring, mytagstring)
        

    def getNonUniqueDefinition(self, surface):
        try:
            if len(self.lexicon[surface])>1:
                (mystrongstring, mytagstring) = self.getStrongsTags(surface)
                return tuple((mystrongstring,mytagstring))
                #mydefs = self.lexicon[surface]
                #firststrongs = mydefs[0][0]
                #mytags = []
                #for mydef in mydefs:
                #    mytags.append(mydef[1])
                #    if firststrongs != mydef[0]:
                #        return None
                # OK, so we know that they all have the same Strong's number
                # Now we need to get the tag
                #mytag = "/".join(mytags)
                #return tuple((mytag,firststrongs))
            else:
                return None
        except KeyError:
            return None

    def entryIsAmbiguous(self, entry):
        if "/" in entry[0] or "/" in entry[1]:
            return True
        else:
            return False
        
